<div class="transactions-container">

  <div class="header">
    <h2>Industry Bulk Transactions</h2>
    <p>Manage payment and finance approvals for bulk Industry batches</p>
  </div>

  <div class="table-wrapper">

    <table class="modern-table">

      <thead>
        <tr>
          <th>Sl. No</th>
          <th>Company</th>
          <th>Short Code</th>
          <th>Date Range</th>
          <th>Total Employees</th>
          <th>Mode</th>
          <th>Amount</th>
          <th>Txn / Ref</th>
          <th>Date</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let b of batches; let i = index"
            [class.editing]="b.isEditing">

          <!-- SL -->
          <td class="sl">{{ i + 1 }}</td>

          <td class="college">{{ b.company_name }}</td>
          <td>{{ b.company_short_name }}</td>

          <td>
            {{ b.from_date | date:'dd MMM yyyy' }} -
            {{ b.to_date | date:'dd MMM yyyy' }}
          </td>

          <td>
            <span class="pill">{{ b.total_employees }}</span>
          </td>

          <!-- MODE -->
          <td>
            <span *ngIf="!b.isEditing"
                  class="badge mode"
                  [ngClass]="b.payment_mode?.toLowerCase()">
              {{ b.payment_mode || '—' }}
            </span>

            <select *ngIf="b.isEditing"
                    [(ngModel)]="b.payment_mode"
                    class="input">
              <option value="">Select</option>
              <option value="RTGS">RTGS</option>
              <option value="NEFT">NEFT</option>
              <option value="CHEQUE">Cheque</option>
              <option value="UPI">UPI</option>
            </select>
          </td>

          <!-- AMOUNT -->
          <td>
            <span *ngIf="!b.isEditing" class="amount">
              ₹ {{ b.amount || 0 }}
            </span>

            <input *ngIf="b.isEditing"
                   type="number"
                   [(ngModel)]="b.amount"
                   class="input" />
          </td>

          <!-- TXN -->
          <td>
            <span *ngIf="!b.isEditing">
              {{ b.transaction_id || '—' }}
            </span>

            <input *ngIf="b.isEditing"
                   [(ngModel)]="b.transaction_id"
                   class="input" />
          </td>

          <!-- DATE -->
          <td>
            <span *ngIf="!b.isEditing">
              {{ b.payment_date | date:'dd-MM-yyyy' }}
            </span>

            <input *ngIf="b.isEditing"
                   type="date"
                   [(ngModel)]="b.payment_date"
                   class="input" />
          </td>

          <!-- STATUS -->
          <td>
            <span class="badge status"
                  [class.paid]="b.paid_status">
              {{ b.paid_status ? 'Paid' : 'Pending' }}
            </span>
          </td>

          <!-- ACTION -->
          <td>

            <button *ngIf="!b.isEditing"
                    class="btn edit"
                    (click)="edit(b)">
              <i class="fa-solid fa-pen"></i> Edit
            </button>

            <button *ngIf="b.isEditing"
                    class="btn save"
                    (click)="save(b)">
              <i class="fa-solid fa-check"></i>
            </button>

            <button *ngIf="b.isEditing"
                    class="btn cancel"
                    (click)="cancel(b)">
              <i class="fa-solid fa-xmark"></i>
            </button>

          </td>

        </tr>
      </tbody>

    </table>

  </div>
</div>
